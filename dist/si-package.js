d3.divgrid=function(a){function b(a,g){var h=a.slice();"undefined"!=typeof g&&(f.axis===g?f.up?(f.axis=null,f.up=!1):f.up=!0:(f.axis=g,f.up=!1),null!=f.axis&&(h.sort(function(a,b){return a[g]-b[g]}),f.up&&h.reverse()));var i=c.select("tbody"),j=i.selectAll("tr").data(h.slice(0,d));j.enter().append("tr"),j.exit().remove();var k=j.selectAll("td").data(function(a){return e.map(function(b){return a[b]})});k.enter().append("td"),k.text(function(a){return a}),k.exit().remove(),c.select("table").selectAll("tr").selectAll("th").selectAll("i").attr("class",function(a){var b=d3.select(this.parentNode).datum();return b===f.axis?f.up?"icon-chevron_down":"icon-chevron_up":void 0}),c.select("table").selectAll("thead").selectAll("tr").selectAll("th").on("click",function(c){b(a,c)})}var c,d=50,e=[],f={axis:null,up:!1},g=function(a){c=a;var d=c.data()[0];0==e.length&&(e=d3.keys(d[0])),c.selectAll("table").data([!0]).enter().append("table").attr("class","table table-hover");c.select("table").selectAll("thead").data([!0]).enter().append("thead").selectAll("tr").data([!0]).enter().append("tr").selectAll("th").data(e).enter().append("th").text(function(a){return a}).selectAll("i").data([!0]).enter().append("i");return c.select("table").selectAll("tbody").data([!0]).enter().append("tbody"),b(d),g};return g.columns=function(a){return arguments.length?(e=a,this):e},g.brush=function(a){f.axis=null,b(a)},g};var si;!function(a){var b;!function(a){var b=function(){function a(b,c){this.$log=b,this.$compile=c,this.restrict="EA",this.scope={settings:"="},a.that=this}return a.hexToRgb=function(a){var b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return b?{r:parseInt(b[1],16),g:parseInt(b[2],16),b:parseInt(b[3],16)}:null},a.prototype.link=function(b,c,d){var e=b.settings,f=angular.element("<div class='parcoords' style='height:200px;'></div>");if(c.append(f),a.that.$compile(f)(b),e.showGrid){var g=angular.element("<div class='parcoords-grid'></div>");c.append(g),a.that.$compile(g)(b)}var h=c[0].firstElementChild,i=e.getData(),j=function(){h.innerHTML="";var b=d3.parcoords()(h);if("RANGE"===e.color.type){var c={color:e.color.lower.color,alpha:1},d={color:e.color.upper.color,alpha:1};if(void 0===c.color&&(c.color="#de1c22"),void 0===d.color&&(d.color="#acdd4b"),(c.color.length-1)%4===0){var f=(c.color.length-1)/4,g=c.color.slice(0,-f),j=c.color.substr(c.color.length-f),k=parseInt(j,16)/255;c.color=g,c.alpha=k}if((d.color.length-1)%4===0){var f=(d.color.length-1)/4,g=d.color.slice(0,-f),j=d.color.substr(d.color.length-f),k=parseInt(j,16)/255;d.color=g,d.alpha=k}var l=[e.color.lower.value,e.color.upper.value],m=[c,d],n=d3.scale.linear().domain(l).range(m),o=function(b){var c=b[e.color.axis],d=n(c),f=a.hexToRgb(d.color),g="rgba("+f.r+","+f.g+","+f.b+","+d.alpha+")";return g};b.color(o)}else"function"==typeof e.color&&b.color(e.color);void 0===e.alpha?b.alpha(.4):b.alpha(e.alpha),i.then(function(a){if(b.data(a),e.hideAxis&&b.hideAxis(e.hideAxis),b.render(),e.brushingEnabled&&b.brushMode("1D-axes"),e.showGrid){var c=h.nextElementSibling,d=d3.divgrid();d3.select(c).datum(a).call(d).selectAll("tbody tr").on("mouseover",function(a){b.highlight([a])}).on("mouseout",b.unhighlight),b.on("brush",function(a){d.brush(a)})}e.reorderable===!0&&b.reorderable(),e.flipAxis&&e.flipAxis.length&&b.flipAxis(e.flipAxis)})};j(),window.onresize=function(a){j()}},a.Factory=function(){var b=function(b,c){return new a(b,c)};return b.$inject=["$log","$compile"],b},a}();angular.module("si.package",[]).directive("siParcoords",b.Factory())}(b=a["package"]||(a["package"]={}))}(si||(si={}));