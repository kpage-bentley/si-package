var createParcoordsGrid=function(a,b,c){function d(){for(var e,g,h=d3.keys(c[0]),k=b.getElementsByTagName("thead")[0].getElementsByTagName("tr")[0],l=k.getElementsByTagName("i"),m=0;m<l.length;++m){var n=l[m];"icon-chevron_down"===n.className?(e=h[m],g=!0):"icon-chevron_up"===n.className&&(e=h[m],g=!1)}var o=c.slice();"undefined"!=typeof e&&(o.sort(function(a,b){return a[e]-b[e]}),g&&o.reverse());var p=b.getElementsByTagName("tbody")[0];p.innerHTML="";for(var q=f(o,function(b){var e=h.map(function(a){return b[a]}),g=document.createElement("tr");if(i.checkbox){var j=document.createElement("th");j.width="20px",j.innerHTML="<input type='checkbox' checked='checked'></input>";var k=j.getElementsByTagName("input")[0];k.addEventListener("change",function(a){var e=c.indexOf(b);e>-1&&c.splice(e,1),d()}),g.appendChild(j)}for(var l=f(e,function(a){var b=document.createElement("td");return b.innerHTML=a,b}),m=0;m<l.length;++m)g.appendChild(l[m]);return g.addEventListener("mouseover",function(c){a.highlight([b])}),g.addEventListener("mouseout",a.unhighlight),g},j),m=0;m<q.length;++m)p.appendChild(q[m])}function e(){var a=d3.keys(c[0]);b.innerHTML="<table class='table table-hover'><thead><tr></tr></thead><tbody></tbody></table>";var e=b.getElementsByTagName("thead")[0].getElementsByTagName("tr")[0];if(i.checkbox){var h=document.createElement("th");h.width="20px",h.innerHTML="<input type='checkbox' checked='checked'></input>",e.appendChild(h)}for(var j=f(a,function(a){var b=document.createElement("th");return b.innerHTML=a+"<i></i>",b.addEventListener("mousedown",function(c){g(a);var e=b.getElementsByTagName("i")[0];""===e.className?e.className="icon-chevron_down":"icon-chevron_down"===e.className?e.className="icon-chevron_up":e.className="",d()}),b}),k=0;k<j.length;++k)e.appendChild(j[k]);d()}function f(a,b,c){c="undefined"==typeof c?a.length:c;for(var d=[],e=0;e<Math.min(c,a.length);++e){var f=a[e],g=b(f);d.push(g)}return d}function g(a){for(var c=b.getElementsByTagName("thead")[0].getElementsByTagName("tr")[0],d=c.getElementsByTagName("i"),e=0;e<d.length;++e){var f=d[e];f.previousSibling.textContent!==a&&(f.className="")}}function h(a){c=a,g(),d()}var i={checkbox:!0},j=50;return e(),{brush:h}},si;!function(a){var b;!function(a){var b=function(){function a(b,c){this.$log=b,this.$compile=c,this.restrict="EA",this.scope={settings:"="},a.that=this}return a.hexToRgb=function(a){var b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return b?{r:parseInt(b[1],16),g:parseInt(b[2],16),b:parseInt(b[3],16)}:null},a.prototype.link=function(b,c,d){var e=b.settings,f=angular.element("<div class='parcoords' style='height:200px;'></div>");if(c.append(f),a.that.$compile(f)(b),e.showGrid){var g=angular.element("<div class='parcoords-grid'></div>");c.append(g),a.that.$compile(g)(b)}var h=c[0].firstElementChild,i=e.getData(),j=function(){h.innerHTML="";var b=d3.parcoords()(h);if("RANGE"===e.color.type){var c={color:e.color.lower.color,alpha:1},d={color:e.color.upper.color,alpha:1};if(void 0===c.color&&(c.color="#de1c22"),void 0===d.color&&(d.color="#acdd4b"),(c.color.length-1)%4===0){var f=(c.color.length-1)/4,g=c.color.slice(0,-f),j=c.color.substr(c.color.length-f),k=parseInt(j,16)/255;c.color=g,c.alpha=k}if((d.color.length-1)%4===0){var f=(d.color.length-1)/4,g=d.color.slice(0,-f),j=d.color.substr(d.color.length-f),k=parseInt(j,16)/255;d.color=g,d.alpha=k}var l=[e.color.lower.value,e.color.upper.value],m=[c,d],n=d3.scale.linear().domain(l).range(m),o=function(b){var c=b[e.color.axis],d=n(c),f=a.hexToRgb(d.color),g="rgba("+f.r+","+f.g+","+f.b+","+d.alpha+")";return g};b.color(o)}else"function"==typeof e.color&&b.color(e.color);void 0===e.alpha?b.alpha(.4):b.alpha(e.alpha),i.then(function(a){if(b.data(a),e.hideAxis&&b.hideAxis(e.hideAxis),b.render(),e.brushingEnabled&&b.brushMode("1D-axes"),e.showGrid){var c=h.nextElementSibling,d=createParcoordsGrid(b,c,a);b.on("brush",function(a){d.brush(a)})}e.reorderable===!0&&b.reorderable(),e.flipAxis&&e.flipAxis.length&&b.flipAxis(e.flipAxis)})};j(),window.onresize=function(a){j()}},a.Factory=function(){var b=function(b,c){return new a(b,c)};return b.$inject=["$log","$compile"],b},a}();angular.module("si.package",[]).directive("siParcoords",b.Factory())}(b=a["package"]||(a["package"]={}))}(si||(si={}));