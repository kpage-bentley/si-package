var ParcoordsHelper=function(){function a(){}return a.create=function(a,b,c,d){function e(){for(var f,g,i=d3.keys(c[0]),j=b.getElementsByTagName("thead")[0].getElementsByTagName("tr")[0],k=j.getElementsByTagName("i"),n=0;n<k.length;++n){var o=k[n];"icon-chevron_down"===o.className?(f=i[n],g=!0):"icon-chevron_up"===o.className&&(f=i[n],g=!1)}var p=c.slice();"undefined"!=typeof f&&(p.sort(function(a,b){return a[f]-b[f]}),g&&p.reverse());var q=b.getElementsByTagName("tbody")[0];q.innerHTML="";for(var r=h(p,function(b){var f=i.map(function(a){return b[a]}),g=document.createElement("tr");if(l.checkbox){var j=document.createElement("th");j.width="20px",j.innerHTML="<input type='checkbox' checked='checked'></input>";var k=j.getElementsByTagName("input")[0];k.addEventListener("change",function(a){var d=c.indexOf(b);d>-1&&c.splice(d,1),e()}),g.appendChild(j)}for(var m=h(f,function(a){var b=document.createElement("td");return b.innerHTML=a,b}),n=0;n<m.length;++n)g.appendChild(m[n]);for(var n=0;n<d.length;++n){var o=document.createElement("td");o.appendChild(d[n].constructor(b)),g.appendChild(o)}return g.addEventListener("mouseover",function(c){a.highlight([b])}),g.addEventListener("mouseout",a.unhighlight),g},m),n=0;n<r.length;++n)q.appendChild(r[n])}function f(){var a=d3.keys(c[0]),f=b.getElementsByTagName("thead")[0].getElementsByTagName("tr")[0];if(l.checkbox){var g=document.createElement("th");g.width="20px",g.innerHTML="<input type='checkbox' checked='checked'></input>";var j=g.getElementsByTagName("input")[0];j.addEventListener("change",function(a){c=j.checked?k.slice():[],e()}),f.appendChild(g)}for(var m=h(a,function(a){var b=document.createElement("th");return b.innerHTML=a+"<i></i>",b.addEventListener("mousedown",function(c){i(a);var d=b.getElementsByTagName("i")[0];""===d.className?d.className="icon-chevron_down":"icon-chevron_down"===d.className?d.className="icon-chevron_up":d.className="",e()}),b}),n=0;n<m.length;++n)f.appendChild(m[n]);for(var n=0;n<d.length;++n){var o=d[n],g=document.createElement("th");g.innerHTML=o.name,f.appendChild(g)}}function g(){b.innerHTML="<table class='table table-hover'><thead><tr></tr></thead><tbody></tbody></table>",f(),e()}function h(a,b,c){c="undefined"==typeof c?a.length:c;for(var d=[],e=0;e<Math.min(c,a.length);++e){var f=a[e],g=b(f);d.push(g)}return d}function i(a){for(var c=b.getElementsByTagName("thead")[0].getElementsByTagName("tr")[0],d=c.getElementsByTagName("i"),e=0;e<d.length;++e){var f=d[e];f.previousSibling.textContent!==a&&(f.className="")}}function j(a){c=a,i(),e()}var k=c.slice();"undefined"==typeof d&&(d=[]);var l={checkbox:!1},m=50;return g(),{brush:j}},a.hexToRgb=function(a){var b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return b?{r:parseInt(b[1],16),g:parseInt(b[2],16),b:parseInt(b[3],16)}:null},a}(),si;!function(a){var b;!function(a){var b=function(){function a(b,c){this.$log=b,this.$compile=c,this.restrict="EA",this.scope={settings:"="},a.that=this}return a.prototype.link=function(b,c,d){var e=b.settings,f=angular.element("<div class='parcoords' style='height:200px;'></div>");if(c.append(f),a.that.$compile(f)(b),e.showGrid){var g=angular.element("<div class='parcoords-grid'></div>");c.append(g),a.that.$compile(g)(b)}var h=c[0].firstElementChild,i=e.getData(),j=function(){h.innerHTML="";var a=d3.parcoords()(h);if("RANGE"===e.color.type){var b={color:e.color.lower.color,alpha:1},c={color:e.color.upper.color,alpha:1};if(void 0===b.color&&(b.color="#de1c22"),void 0===c.color&&(c.color="#acdd4b"),(b.color.length-1)%4===0){var d=(b.color.length-1)/4,f=b.color.slice(0,-d),g=b.color.substr(b.color.length-d),j=parseInt(g,16)/255;b.color=f,b.alpha=j}if((c.color.length-1)%4===0){var d=(c.color.length-1)/4,f=c.color.slice(0,-d),g=c.color.substr(c.color.length-d),j=parseInt(g,16)/255;c.color=f,c.alpha=j}var k=[e.color.lower.value,e.color.upper.value],l=[b,c],m=d3.scale.linear().domain(k).range(l),n=function(a){var b=a[e.color.axis],c=m(b),d=ParcoordsHelper.hexToRgb(c.color),f="rgba("+d.r+","+d.g+","+d.b+","+c.alpha+")";return f};a.color(n)}else"function"==typeof e.color&&a.color(e.color);void 0===e.alpha?a.alpha(.4):a.alpha(e.alpha),i.then(function(b){if(a.data(b),e.hideAxis&&a.hideAxis(e.hideAxis),a.render(),e.brushingEnabled&&a.brushMode("1D-axes"),e.showGrid){var c=h.nextElementSibling,d=ParcoordsHelper.create(a,c,b,e.customGridColumns);a.on("brush",function(a){d.brush(a)})}e.reorderable===!0&&a.reorderable(),e.flipAxis&&e.flipAxis.length&&a.flipAxis(e.flipAxis)})};j(),window.onresize=function(a){j()}},a.Factory=function(){var b=function(b,c){return new a(b,c)};return b.$inject=["$log","$compile"],b},a}();angular.module("si.package",[]).directive("siParcoords",b.Factory())}(b=a["package"]||(a["package"]={}))}(si||(si={}));